window.ss=window.ss||{views:{},models:{},controllers:{},rounter:null},window.ss.views.App=Backbone.View.extend({el:".js-app",events:function(){return Modernizr.touch?{"click .js-wishBtnCheckbox":"wish","click .js-cancelWish":"cancelWish","click .js-next-buton":"webkitIt","click .js-menuShow":"showHideMenu"}:{"click .js-wishBtnCheckbox":"wish","click .js-cancelWish":"cancelWish","click .js-next-buton":"webkitIt","click .js-menuShow":"preventDef","click .js-search-field":"resizeSearch","mouseenter .js-menu":"showHideMenu","mouseleave .js-menu":"showHideMenu","mouseenter .js-menuShow":"showHideMenu","mouseleave .js-menuShow":"showHideMenu"}},bodyFunc:function(e){$(e.target.offsetParent).closest("div").hasClass("js-search-field")||$(".js-search-field").removeClass("expand")},resizeSearch:function(e){$(e.currentTarget).addClass("expand")},preventDef:function(e){e.preventDefault()},showHideMenu:function(e){var s=$(".js-dropdown"),t=$(".js-mask");if($(e.currentTarget).hasClass("js-menu"))s.hasClass("active")?(s.removeClass("active"),t.removeClass("active"),$(".js-menuShow").removeClass("active")):(s.addClass("active"),t.addClass("active"));else if($(e.currentTarget).hasClass("js-menuShow")){var i=e.currentTarget.attributes.href.nodeValue,n=$(e.currentTarget),a=s.find('.js-dropdown-container[data-type="'+i+'"]');$(".js-menuShow").removeClass("active"),n.addClass("active"),$(".js-dropdown-container").removeClass("active"),a.addClass("active")}},cancelWish:function(e){e.preventDefault();var s=e.currentTarget;s.parents(".js-product").find(".js-wishBtnCheckbox").trigger("click")},progressTimer:function(){},setActiveSlide:function(){},wish:function(e){var s=$(e.currentTarget);console.log(s.parents(".js-product")),s.is(":checked")?(s.closest(".js-wishBtn").addClass("checked"),s.parents(".js-product").find(".js-wishBlock").addClass("show")):(s.closest(".js-wishBtn").removeClass("checked"),s.parents(".js-product").find(".js-wishBlock").removeClass("show"))},fancybox:function(){$(".js-fancybox").fancybox({padding:0,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"></iframe>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><svg class="icon_close_thin"><use xlink:href="/img/icons.svg#close_thin" /></svg></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}})},initialize:function(){this.views={},this.$(".js-rating").barrating("show",{showSelectedRating:!0,reverse:!1,readonly:!0}),this.progressTimer(),this.render(),this.$el.hasClass("home")&&(this.views.carousel=new window.ss.views.Carousel({refreshTimeout:2e3})),this.$el.hasClass("product-page")&&(this.views.gallery=new window.ss.views.Gallery({})),this.fancybox(),$("body").bind("click",this.bodyFunc)},webkitIt:function(e){e.preventDefault();var s=$(e.currentTarget),t=s.parents(".js-slide"),i=parseInt(t.attr("data-slide")),n=s.parents(".js-webkitContainer").find(".js-slide").length,a=null,r=s.parents(".js-webkitContainer").find(".js-next-buton");s.hasClass("disabled")||(t.removeClass("active"),a=$(i+1>n?".js-slide[data-slide='1'":".js-slide[data-slide='"+(i+1)+"'"),_.delay(function(){a.addClass("active")},150),r.addClass("disabled"),_.delay(function(){a.addClass("even").removeClass("odd"),t.addClass("odd").removeClass("even"),r.removeClass("disabled")},1e3))},render:function(){}}),window.ss.views.Carousel=Backbone.View.extend({el:".js-carousel",events:{"click .js-carouselLink":"changeSlideClick"},initialize:function(){this.currentItem=0,this.$links=this.$(".js-carouselLink"),this.$slideHolder=this.$(".js-carouselSlides"),this.$items=this.$(".js-carouselItem"),this.timeout=0,this.$el.attr("data-autorefresh")&&this.restartTimer()},changeSlideClick:function(e){e.preventDefault(),this.currentItem=$(e.currentTarget).parent().index(),this.changeSlide()},changeSlide:function(){this.currentItem=this.currentItem>=this.$links.length?0:this.currentItem,this.$links.filter(".active").removeClass("active"),this.$links.eq(this.currentItem).addClass("active"),this.$slideHolder.transition({y:350*-this.currentItem}),this.restartTimer()},restartTimer:function(){clearTimeout(this.timeout),this.timeout=setTimeout(this.nextSlide.bind(this),5e3)},nextSlide:function(){this.currentItem+=1,this.changeSlide()}}),window.ss.views.Catalog=Backbone.View.extend({el:".js-catalog",events:{"click .js-sort":"sort"},sort:function(){}}),window.ss.views.Gallery=Backbone.View.extend({el:".js-gallery",events:{"click .js-listItem":"showImage"},initialize:function(){console.log("init gallery")},showImage:function(e){e.preventDefault(),console.log(e.currentTarget)}}),$(function(){window.ssApp=new window.ss.views.App});