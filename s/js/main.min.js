window.ss=window.ss||{views:{},models:{},controllers:{},rounter:null},window.ss.views.App=Backbone.View.extend({el:".js-app",events:function(){return Modernizr.touch?{"click .js-wishBtnCheckbox":"wish","click .js-cancelWish":"cancelWish","click .js-next-buton":"webkitIt","click .js-menuShow":"showHideMenu"}:{"click .js-wishBtnCheckbox":"wish","click .js-cancelWish":"cancelWish","click .js-next-buton":"webkitIt","click .js-menuShow":"preventDef","click .js-search-field":"resizeSearch","click .js-showReview":"reviewShow","click .js-sendReview":"reviewHide","mouseenter .js-menu":"showHideMenu","mouseleave .js-menu":"showHideMenu","mouseenter .js-menuShow":"showHideMenu","mouseleave .js-menuShow":"showHideMenu"}},reviewShow:function(e){$(e.currentTarget).hide(),$(".js-review").addClass("active")},reviewHide:function(e){e.preventDefault(),$(".js-showReview").show(),$(".js-review").removeClass("active")},bodyFunc:function(e){$(e.target.offsetParent).parents(".js-search-field").length||$(e.target).hasClass("js-listItem")||$(".js-search-field").removeClass("expand")},resizeSearch:function(e){$(e.currentTarget).addClass("expand")},preventDef:function(e){e.preventDefault()},showHideMenu:function(e){var s=$(".js-dropdown"),t=$(".js-mask");if($(".js-search-field").removeClass("expand"),$(e.currentTarget).hasClass("js-menu"))s.hasClass("active")?(s.removeClass("active"),t.removeClass("active"),$(".js-menuShow").removeClass("active")):(s.addClass("active"),t.addClass("active"));else if($(e.currentTarget).hasClass("js-menuShow")){var i=e.currentTarget.attributes.href.nodeValue,a=$(e.currentTarget),n=s.find('.js-dropdown-container[data-type="'+i+'"]');$(".js-menuShow").removeClass("active"),a.addClass("active"),$(".js-dropdown-container").removeClass("active"),n.addClass("active")}},cancelWish:function(e){e.preventDefault();var s=e.currentTarget;s.parents(".js-product").find(".js-wishBtnCheckbox").trigger("click")},progressTimer:function(){},setActiveSlide:function(){},wish:function(e){var s=$(e.currentTarget);s.is(":checked")?(s.closest(".js-wishBtn").addClass("checked"),s.parents(".js-product").find(".js-wishBlock").addClass("show")):(s.closest(".js-wishBtn").removeClass("checked"),s.parents(".js-product").find(".js-wishBlock").removeClass("show"))},fancybox:function(){$(".js-fancybox").fancybox({padding:0,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"></iframe>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><svg class="icon_close_thin"><use xlink:href="/img/icons.svg#close_thin" /></svg></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}})},initialize:function(){this.views={},this.$(".js-rating").barrating("show",{showSelectedRating:!0,reverse:!1,readonly:!0}),this.progressTimer(),this.render(),this.$el.hasClass("home")&&(this.views.carousel=new window.ss.views.Carousel({refreshTimeout:2e3})),this.$el.hasClass("product-page")&&(this.views.gallery=new window.ss.views.Gallery({})),this.fancybox(),$("body").bind("click",this.bodyFunc)},webkitIt:function(e){e.preventDefault();var s=$(e.currentTarget),t=s.closest(".js-slide"),i=parseInt(t.attr("data-slide")),a=s.closest(".js-webkitContainer").find(".js-slide").length,n=null,r=s.closest(".js-webkitContainer").find(".js-next-buton");s.hasClass("disabled")||(t.removeClass("active"),n=$(i+1>a?".js-slide[data-slide='1']":".js-slide[data-slide='"+(i+1)+"']"),_.delay(function(){n.addClass("active")},150),r.addClass("disabled"),_.delay(function(){n.addClass("even").removeClass("odd"),t.addClass("odd").removeClass("even"),r.removeClass("disabled")},1e3))},render:function(){}}),window.ss.views.Carousel=Backbone.View.extend({el:".js-carousel",events:{"click .js-carouselLink":"changeSlideClick"},initialize:function(){this.currentItem=0,this.$links=this.$(".js-carouselLink"),this.$slideHolder=this.$(".js-carouselSlides"),this.$items=this.$(".js-carouselItem"),this.timeout=0,this.$el.attr("data-autorefresh")&&this.restartTimer()},changeSlideClick:function(e){e.preventDefault(),this.currentItem=$(e.currentTarget).parent().index(),this.changeSlide()},changeSlide:function(){this.currentItem=this.currentItem>=this.$links.length?0:this.currentItem,this.$links.filter(".active").removeClass("active"),this.$links.eq(this.currentItem).addClass("active"),this.$slideHolder.transition({y:350*-this.currentItem}),this.restartTimer()},restartTimer:function(){clearTimeout(this.timeout),this.timeout=setTimeout(this.nextSlide.bind(this),5e3)},nextSlide:function(){this.currentItem+=1,this.changeSlide()}}),window.ss.views.Catalog=Backbone.View.extend({el:".js-catalog",events:{"click .js-sort":"sort"},sort:function(){}}),window.ss.views.Gallery=Backbone.View.extend({el:".js-gallery",events:{"click .js-listItem":"showImage"},initialize:function(){var e=this;setInterval(function(){if(parseInt($(e.el).find(".js-listItem.active").index())+1!==parseInt($(e.el).find(".js-listItem").length)){var s=parseInt($(e.el).find(".js-listItem.active").index())+2;$('.js-listItem[data-slideId="'+s+'"]').trigger("click")}else $(".js-listItem").eq(0).trigger("click")},1e4)},showImage:function(e){e.preventDefault();var s=$(e.currentTarget),t=parseInt($(e.currentTarget).attr("data-slideId"));$(".js-listItem.active").removeClass("active"),s.addClass("active"),$(".js-fancybox").fadeOut(),$(this.el).find('.js-fancybox[data-slideId="'+t+'"]').fadeIn()}}),$(function(){function e(){}function s(e){e.data==YT.PlayerState.PLAYING?i.addClass("activated"):i.removeClass("activated")}if(window.ssApp=new window.ss.views.App,$(".js-video-container")){var t,i=$(".js-video-container"),a=$("#player").attr("data-src");window.onYouTubeIframeAPIReady=function(){t=new YT.Player("player",{height:"390",width:"640",videoId:a,events:{onReady:e,onStateChange:s}})}}});