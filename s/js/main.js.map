{"version":3,"sources":["_define.js","views/app.js","views/carousel.js","views/catalog.js","views/gallery.js","views/order.js","init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["window.ss = window.ss || {\r\n\tviews: {},\r\n\tmodels: {},\r\n\tcontrollers: {},\r\n\trounter: null\r\n};","window.ss.views.App = Backbone.View.extend({\r\n\tel: '.js-app',\r\n\tnameInput: false,\r\n\tphoneInput: false,\r\n\tactiveMenu: null,\r\n\tnewActiveMenu: null,\r\n\tmobileMenuStep: 0,\r\n\tevents: function() {\r\n\t\treturn Modernizr.touch ? {\r\n\t\t\t'click .js-menu': 'showHideTouch',\r\n\t\t\t'click .js-menuShow': 'showHideTouch',\r\n\t\t\t'click .js-search-field': 'resizeSearch',\r\n\t\t\t'click .js-showReview': 'reviewShow',\r\n\t\t\t'click .js-sendReview': 'reviewHide',\r\n\t\t\t'click .js-order': 'showPopup',\r\n\t\t\t'click .js-wishBtnCheckbox': 'wish',\r\n\t\t\t'click .js-cancelWish': 'cancelWish',\r\n\t\t\t'click .js-next-buton': 'webkitIt',\r\n\t\t\t'click .js-orderSend': 'sendOrder',\r\n\t\t\t'click .js-orderCancel': 'orderCancel',\r\n\t\t\t'keyup .js-inputName': 'changeName',\r\n\t\t\t'keydown .js-inputPhone': 'changePhone',\r\n\t\t\t'input .js-inputPhone': 'validatePhone',\r\n\t\t\t'click .js-closePopup': 'closeFancybox',\r\n\t\t\t'click .js-mobileMenuToggle': 'toggleMobileMenu',\r\n\t\t\t//mobile menu events\r\n\t\t\t'click .js-mobileFirstItem': 'toggleFirstLayerMenu',\r\n\t\t\t'click .js-mobileBtn': 'stepBack'\r\n\t\t} : {\r\n\t\t\t'click .js-menuShow': 'preventDef',\r\n\t\t\t'mouseenter .js-menu': 'showHideMenu',\r\n\t\t\t'mouseleave .js-menu': 'showHideMenu',\r\n\t\t\t'mouseenter .js-menuShow': 'showHideMenu',\r\n\t\t\t'mouseleave .js-menuShow': 'showHideMenu',\r\n\t\t\t'click .js-search-field': 'resizeSearch',\r\n\t\t\t'click .js-showReview': 'reviewShow',\r\n\t\t\t'click .js-sendReview': 'reviewHide',\r\n\t\t\t'click .js-order': 'showPopup',\r\n\t\t\t'click .js-wishBtnCheckbox': 'wish',\r\n\t\t\t'click .js-cancelWish': 'cancelWish',\r\n\t\t\t'click .js-next-buton': 'webkitIt',\r\n\t\t\t'click .js-orderSend': 'sendOrder',\r\n\t\t\t'click .js-orderCancel': 'orderCancel',\r\n\t\t\t'keyup .js-inputName': 'changeName',\r\n\t\t\t'keydown .js-inputPhone': 'changePhone',\r\n\t\t\t'input .js-inputPhone': 'validatePhone',\r\n\t\t\t'click .js-closePopup': 'closeFancybox',\r\n\t\t\t'click .js-mobileMenuToggle': 'toggleMobileMenu',\r\n\t\t\t//mobile menu events\r\n\t\t\t'click .js-mobileFirstItem': 'toggleFirstLayerMenu',\r\n\t\t\t'click .js-mobileBtn': 'stepBack',\r\n\t\t\t'click .js-menuShow': 'showMobilemenu'\r\n\t\t};\t\t\r\n\t},\r\n\r\n\t/*\r\n\t.js-mobileMenu\r\n\t.js-mobileBtn\r\n\t.js-mobileTitle\r\n\t.js-mobileFirstList\r\n\t.js-mobileFirstItem\r\n\t.js-mobileSecondList\r\n\t.js-mobileSecondItem\r\n\t.js-mobileThirdList\r\n\t.js-mobileThirdItem\r\n\t*/\r\n\r\n\r\n\tshowMobilemenu: function(e) {\r\n\t\te.preventDefault();\r\n\t\tvar currentMenuName = e.currentTarget.attributes.href.nodeValue;\r\n\t\tif (!($('.js-mobileMenuToggle').hasClass('active')) && $(window).width() <= 570){\r\n\t\t\t$('.js-mobileMenuToggle').click();\r\n\t\t\tif ($('.js-mobileFirstList').find('.js-mobileFirstItem.active').length > 0){\r\n\t\t\t\t$('.js-mobileFirstItem.active').click();\r\n\t\t\t}\r\n\t\t\t$('.js-mobileFirstItem[name=\"'+ currentMenuName +'\"').click();\r\n\t\t}\r\n\t},\r\n\r\n\tstepBack: function(e) {\r\n\t\tvar $button = $(e.currentTarget);\r\n\t\tif (this.mobileMenuStep === 1){\r\n\t\t\t$('.js-mobileMenu').find('.js-mobileFirstItem.active').click();\r\n\t\t}\r\n\t\tif (this.mobileMenuStep === 2){\r\n\t\t\t$('.js-mobileMenu').find('.js-mobileSecondItem.active').click();\r\n\t\t}\r\n\t},\r\n\r\n\ttoggleFirstLayerMenu: function(e) {\r\n\t\tvar $element = $(e.target),\r\n\t\t\t$parent = $(e.target).parent(),\r\n\t\t\tself = this\r\n\t\t;\r\n\t\tif ($element.hasClass('active') || $element.parent().hasClass('active')){\r\n\t\t\t\r\n\t\t\tif ($element.hasClass('js-mobileFirstItem') || $element.parent().hasClass('js-mobileFirstItem')){\r\n\t\t\t\tself.mobileMenuStep = 0;\r\n\t\t\t\t$('.js-mobileBtn').removeClass('active');\r\n\t\t\t\t$('.js-mobileTitle').removeClass('disabled');\r\n\t\t\t\t$('.js-mobileFirstItem').removeClass('disabled').removeClass('active');\r\n\t\t\t\tif ($element.parent().hasClass('js-mobileFirstItem')){\r\n\t\t\t\t\t$element.parent().removeClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$element.removeClass('active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ($element.hasClass('js-mobileSecondItem') || $element.parent().hasClass('js-mobileSecondItem')){\r\n\t\t\t\tself.mobileMenuStep = 1;\r\n\t\t\t\t$('.js-mobileSecondItem').removeClass('disabled');\r\n\t\t\t\tif ($element.parent().hasClass('js-mobileSecondItem')){\r\n\t\t\t\t\t$element.parent().removeClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$element.removeClass('active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif ($element.hasClass('js-mobileFirstItem') || $element.parent().hasClass('js-mobileFirstItem')){\r\n\t\t\t\tself.mobileMenuStep = 1;\r\n\t\t\t\t$('.js-mobileBtn').addClass('active');\r\n\t\t\t\t$('.js-mobileTitle').addClass('disabled');\r\n\t\t\t\tif ($element.parent().hasClass('js-mobileFirstItem')){\r\n\t\t\t\t\t$parent = $element.closest('.js-mobileFirstList');\r\n\t\t\t\t\t$element.parent().addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$element.addClass('active');\r\n\t\t\t\t}\r\n\t\t\t\t$parent.find('.js-mobileFirstItem').each(function(index, item){\r\n\t\t\t\t\tif (!($(item).hasClass('active'))){\r\n\t\t\t\t\t\t$(item).addClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif ($element.hasClass('js-mobileSecondItem') || $element.parent().hasClass('js-mobileSecondItem')){\r\n\t\t\t\tself.mobileMenuStep = 2;\r\n\t\t\t\tif ($element.parent().hasClass('js-mobileSecondItem')){\r\n\t\t\t\t\t$parent = $element.closest('.js-mobileFirstList');\r\n\t\t\t\t\t$element.parent().addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$element.addClass('active');\r\n\t\t\t\t}\r\n\t\t\t\t$parent.find('.js-mobileSecondItem').each(function(index, item){\r\n\t\t\t\t\tif (!($(item).hasClass('active'))){\r\n\t\t\t\t\t\t$(item).addClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttoggleMobileMenu: function(e) {\r\n\t\tvar $menu = $('.js-mobileMenu'),\r\n\t\t\t$button = $(e.currentTarget),\r\n\t\t\t$body = $('body')\r\n\t\t;\r\n\t\tif ($button.hasClass('active')){\r\n\t\t\t$button.removeClass('active');\r\n\t\t\t$body.removeClass('slided');\r\n\t\t} else {\r\n\t\t\t$button.addClass('active');\r\n\t\t\t$body.addClass('slided');\r\n\t\t}\r\n\t},\r\n\r\n\tshowHideTouch: function(e) {\r\n\t\tvar $dropdown = $('.js-dropdown'),\r\n\t\t\t$backMask = $('.js-mask'),\r\n\t\t\tself = this\r\n\t\t;\r\n\t\t$('.js-search-field').removeClass('expand');\r\n\t\tconsole.log($(e.currentTarget));\r\n\t\tif ($(e.currentTarget).hasClass('js-menuShow')){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar currentMenuName = e.currentTarget.attributes.href.nodeValue,\r\n\t\t\t\t$link = $(e.currentTarget),\t\t\t\t\r\n\t\t\t\t$currentMenu = $dropdown.find('.js-dropdown-container[data-type=\"' + currentMenuName + '\"]');\r\n\t\t\tself.activeMenu = currentMenuName;\r\n\t\t\t$('.js-menuShow').removeClass('active');\r\n\t\t\t$link.addClass('active');\r\n\t\t\t$('.js-dropdown-container').removeClass('active');\r\n\t\t\t$currentMenu.addClass('active');\r\n\t\t\tif (!($('.js-mobileMenuToggle').hasClass('active')) && $(window).width() < 570){\r\n\t\t\t\t$('.js-mobileMenuToggle').click();\r\n\t\t\t\t$('.js-mobileFirstItem[name=\"'+ currentMenuName +'\"').click();\r\n\t\t\t}\r\n\t\t\tif (!($('.js-mobileMenuToggle').hasClass('active')) && $(window).width() <= 570){\r\n\t\t\t\t$('.js-mobileMenuToggle').click();\r\n\t\t\t\tif ($('.js-mobileFirstList').find('.js-mobileFirstItem.active').length > 0){\r\n\t\t\t\t\t$('.js-mobileFirstItem.active').click();\r\n\t\t\t\t}\r\n\t\t\t\t$('.js-mobileFirstItem[name=\"'+ currentMenuName +'\"').click();\r\n\t\t\t}\r\n\t\t} else if ($(e.currentTarget).hasClass('js-menu')){\r\n\t\t\t// if (currentMenuName !== self.activeMenu){\r\n\t\t\t// \tself.activeMenu = currentMenuName;\r\n\t\t\t// }\r\n\t\t\tif ($dropdown.hasClass('active')){\r\n\t\t\t\tif (self.newActiveMenu === self.activeMenu){\r\n\t\t\t\t\t$dropdown.removeClass('active');\r\n\t\t\t\t\t$backMask.removeClass('active');\r\n\t\t\t\t\t$('.js-menuShow').removeClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.newActiveMenu = self.activeMenu;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tself.newActiveMenu = self.activeMenu;\r\n\t\t\t\t$dropdown.addClass('active');\r\n\t\t\t\t$backMask.addClass('active');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tshowHideMenu: function(e) {\r\n\t\tvar $dropdown = $('.js-dropdown'),\r\n\t\t\t$backMask = $('.js-mask');\r\n\t\t$('.js-search-field').removeClass('expand');\r\n\t\tif ($(e.currentTarget).hasClass('js-menu')){\r\n\t\t\tif ($dropdown.hasClass('active')){\r\n\t\t\t\t$dropdown.removeClass('active');\r\n\t\t\t\t$backMask.removeClass('active');\r\n\t\t\t\t$('.js-menuShow').removeClass('active');\r\n\t\t\t} else {\r\n\t\t\t\t$dropdown.addClass('active');\r\n\t\t\t\t$backMask.addClass('active');\r\n\t\t\t}\r\n\t\t} else if ($(e.currentTarget).hasClass('js-menuShow')){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar currentMenuName = e.currentTarget.attributes.href.nodeValue,\r\n\t\t\t\t$link = $(e.currentTarget),\r\n\t\t\t\t$currentMenu = $dropdown.find('.js-dropdown-container[data-type=\"' + currentMenuName + '\"]');\r\n\t\t\t\r\n\t\t\t$('.js-menuShow').removeClass('active');\r\n\t\t\t$link.addClass('active');\r\n\t\t\t$('.js-dropdown-container').removeClass('active');\r\n\t\t\t$currentMenu.addClass('active');\r\n\t\t}\r\n\t},\r\n\r\n\tcloseFancybox: function(e){\r\n\t\te.preventDefault();\r\n\t\t$.fancybox.close();\r\n\t},\r\n\r\n\tchangeName: function(event){\r\n\t\tvar $element = $(event.currentTarget);\r\n\t\tif($element.val().length == 0){\r\n\t\t\tthis.nameInput = false;\r\n\t\t} else {\r\n\t\t\tthis.nameInput = true;\r\n\t\t}\r\n\t},\r\n\r\n\tvalidatePhone: function(event){\r\n\t\tvar $element = $(event.currentTarget);\r\n\t\tif (!isNaN($element.val())){\r\n\t\t\tif ($element.val().length == 11){\r\n\t\t\t\t$element.addClass('validate');\r\n\t\t\t\tthis.phoneInput = true;\t\t\r\n\t\t\t} else {\r\n\t\t\t\t$element.removeClass('validate');\r\n\t\t\t\tthis.phoneInput = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t$element.removeClass('validate');\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.phoneInput = false;\r\n\t\t\t_.delay(function(){\r\n\t\t\t\t$element.val('');\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t},\r\n\r\n\tchangePhone: function(event){\r\n\t\tvar value = $(event.currentTarget).val(),\r\n\t\t\tkey = event.which ? event.which : event.keyCode\r\n\t\t;\r\n\t\tif (key < 48 || key > 57 || value.length > 10){\r\n\t\t\tif (key !== 8){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsendOrder: function(e){\r\n\t\te.preventDefault();\r\n\t\tvar \r\n\t\t\t$form = $(e.currentTarget).closest('.js-orderContainer'),\r\n\t\t\tformData = $form.find('.js-order-form').serialize(),\r\n\t\t\tself = this\r\n\t\t;\r\n\t\tif (this.nameInput && this.phoneInput){\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: '#',\r\n\t\t\t\tdata: formData,\r\n\t\t\t\tsuccess : function( response ) {\r\n\t\t\t\t\t$form.find('.js-step1').removeClass('active');\r\n\t\t\t\t\t$form.find('.js-popupName').text($form.find('.js-inputName').val());\r\n\t\t\t\t\t$form.find('.js-congratContainer').addClass('active');\r\n\t\t\t\t\t$form.find('.js-phoneTime').text($form.find('.js-callHours').val() + ':' + $form.find('.js-callMinutes').val());\r\n\t\t\t\t\t_.delay(function(){\r\n\t\t\t\t\t\t$.fancybox.resize;\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\torderCancel: function(e){\r\n\t\te.preventDefault();\r\n\t\t$(e.currentTarget).closest('.js-orderContainer').find('.js-order-form')[0].reset();\r\n\t},\r\n\r\n\treviewShow: function(e){\r\n\t\t$(e.currentTarget).hide();\r\n\t\t$('.js-review').addClass('active');\r\n\t},\r\n\r\n\treviewHide: function(e){\r\n\t\te.preventDefault();\r\n\t\t$('.js-showReview').show();\r\n\t\t$('.js-review').removeClass('active');\r\n\t},\r\n\r\n\tbodyFunc: function(e) {\r\n\t\tif (!($(e.target.offsetParent).parents('.js-search-field').length) && !($(e.target).hasClass('js-listItem'))){\r\n\t\t\t$('.js-search-field').removeClass('expand');\r\n\t\t}\r\n\t},\r\n\r\n\tresizeSearch: function(e) {\r\n\t\t$(e.currentTarget).addClass('expand');\r\n\t},\r\n\r\n\tpreventDef: function(e) {\r\n\t\te.preventDefault();\r\n\t},\r\n\r\n\t// showMenu: function(e) {\r\n\t// \t$('.js-dropdown').addClass('active');\r\n\t// \tconsole.log($(e.currentTarget));\r\n\t// },\r\n\r\n\t// hideMenu: function(e) {\r\n\t// \t$('.js-dropdown').removeClass('active');\r\n\t// \tconsole.log(e);\r\n\t// },\r\n\r\n\tcancelWish: function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\t$(e.currentTarget).closest('.js-product').find('.js-wishBtnCheckbox').trigger('click');\r\n\t},\r\n\tprogressTimer: function () {\r\n\t\t\r\n\t},\r\n\tsetActiveSlide: function (id) {\r\n\r\n\t},\r\n\r\n\r\n\r\n\twish: function (e) {\r\n\t\tvar $currentTarget = $(e.currentTarget);\r\n\t\tif ($currentTarget.is(':checked')) {\r\n\t\t\t$currentTarget.closest('.js-wishBtn').addClass('checked');\r\n\t\t\t$currentTarget.parents('.js-product').find('.js-wishBlock').addClass('show');\r\n\t\t} else {\r\n\t\t\t$currentTarget.closest('.js-wishBtn').removeClass('checked');\r\n\t\t\t$currentTarget.parents('.js-product').find('.js-wishBlock').removeClass('show');\r\n\t\t}\r\n\r\n\t},\r\n\tfancybox: function(){\r\n\t\t$('.js-fancybox').fancybox({\r\n\t\t\tpadding: 0,\r\n\t\t\ttpl: {\r\n\t\t\t\twrap     : '<div class=\"fancybox-wrap\" tabIndex=\"-1\"><div class=\"fancybox-skin\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner\"></div></div></div></div>',\r\n\t\t\t\timage    : '<img class=\"fancybox-image\" src=\"{href}\" alt=\"\" />',\r\n\t\t\t\tiframe   : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\"></iframe>',\r\n\t\t\t\terror    : '<p class=\"fancybox-error\">The requested content cannot be loaded.<br/>Please try again later.</p>',\r\n\t\t\t\tcloseBtn : '<a title=\"Close\" class=\"fancybox-item fancybox-close\" href=\"javascript:;\"><svg class=\"icon_close_thin\"><use xlink:href=\"/img/icons.svg#close_thin\" /></svg></a>',\r\n\t\t\t\tnext     : '<a title=\"Next\" class=\"fancybox-nav fancybox-next\" href=\"javascript:;\"><span></span></a>',\r\n\t\t\t\tprev     : '<a title=\"Previous\" class=\"fancybox-nav fancybox-prev\" href=\"javascript:;\"><span></span></a>'\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tshowPopup: function(e){\r\n\t\te.preventDefault();\r\n\t\tvar $self = $(e.currentTarget);\r\n\t\tvar productId = $(e.currentTarget).attr('data-id');\r\n\t\t$('.js-orderProduct').attr('value', productId);\r\n\t\tif (new Date().getUTCHours() + 3 >= 9 && new Date().getUTCHours() + 3 < 21){\r\n\t\t\t$('.order-popup__category').removeClass('active');\r\n\t\t\t$('.order-popup__online').addClass('active');\r\n\t\t} else {\r\n\t\t\t$('.order-popup__category').removeClass('active');\r\n\t\t\t$('.order-popup__offline').addClass('active');\r\n\t\t}\r\n\t\t$.fancybox.update();\r\n\t},\r\n\torder: function(e){\r\n\t\tvar self = this;\r\n\t\t$('.js-order').fancybox({\r\n\t\t\tpadding: 0,\r\n\t\t\ttpl: {\r\n\t\t\t\twrap     : '<div class=\"fancybox-wrap\" tabIndex=\"-1\"><div class=\"fancybox-skin fancybox-skin_white\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner\"></div></div></div></div>',\r\n\t\t\t\tcloseBtn : '<a title=\"Close\" class=\"fancybox-item fancybox-close js-orderCancel\" href=\"javascript:;\"><svg class=\"icon_close_thin\"><use xlink:href=\"/img/icons.svg#close_small\" /></svg></a>'\r\n\t\t\t},\r\n\t\t\tbeforeShow: function() {\r\n\t\t\t\t$('#buy-popup').addClass('active');\r\n\t\t\t},\r\n\t\t\tafterShow: function() {\r\n\t\t\t\t$('.js-callHours, .js-callMinutes').selectmenu( \"refresh\" );\r\n\r\n\t\t\t},\r\n\t\t\tafterClose: function() {\r\n\t\t\t\t$('#buy-popup').removeClass('active');\r\n\t\t\t\t$('body').find('.js-inputName').val('');\r\n\t\t\t\t$('body').find('.js-inputPhone').val('');\r\n\t\t\t\t$('body').find('.js-callHours').prop('selectedIndex',0);\r\n\t\t\t\t$('body').find('.js-callMinutes').prop('selectedIndex',0);\r\n\t\t\t\t$('body').find('.js-step1').addClass('active');\r\n\t\t\t\t$('body').find('.js-congratContainer').removeClass('active');\r\n\t\t\t\t$('body').find('.js-popupName').text('');\r\n\t\t\t\t$('body').find('.js-phoneTime').text('');\r\n\t\t\t\t$('body').find('.js-inputPhone').removeClass('validate');\r\n\t\t\t\tself.nameInput = false;\r\n\t\t\t\tself.phoneInput = false;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tinitialize: function () {\r\n\t\tthis.views = {};\r\n\t\t// Rating init\r\n\t\tthis.$('.js-rating').barrating('show', {\r\n\t\t\tshowSelectedRating: true,\r\n\t\t\treverse: false,\r\n\t\t\treadonly: true\r\n\t\t});\r\n\t\t// Progress timer\r\n\t\tthis.progressTimer();\r\n\t\tthis.render();\r\n\t\tif (this.$el.hasClass('home')){\r\n\t\t\tthis.views.carousel = new window.ss.views.Carousel({refreshTimeout: 2000});\r\n\t\t}\r\n\t\tif (this.$el.hasClass('product-page')){\r\n\t\t\tthis.views.gallery = new window.ss.views.Gallery({});\r\n\t\t}\r\n\t\tif (this.$el.hasClass('catalog')){\r\n\t\t\tthis.views.gallery = new window.ss.views.Catalog({});\r\n\t\t}\r\n\t\t// \r\n\t\tthis.fancybox();\r\n\t\tthis.order();\r\n\t\tthis.customSelect();\r\n\t\t$('body').bind('click', this.bodyFunc);\r\n\t\t$(window).on('resize', _.debounce(function(){\r\n\t\t\tif ($('.js-mobileMenuToggle').hasClass('active')){\r\n\t\t\t\t$('.js-mobileMenuToggle').click();\r\n\t\t\t}\r\n\t\t}, 200));\r\n\t},\r\n\twebkitIt: function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar $currentTarget = $(e.currentTarget),\r\n\t\t\t$parent = $currentTarget.closest('.js-slide'),\r\n\t\t\tindex = parseInt($parent.attr('data-slide')),\r\n\t\t\ttotalSlides = $currentTarget.closest('.js-webkitContainer').find('.js-slide').length,\r\n\t\t\t$nextSlide = null,\r\n\t\t\t$allButtons = $currentTarget.closest('.js-webkitContainer').find('.js-next-buton')\r\n\t\t;\r\n\t\tif (!($currentTarget.hasClass('disabled'))){\r\n\t\t\t$parent.removeClass('active');\r\n\t\t\tif ((index + 1) > totalSlides){\r\n\t\t\t\t$nextSlide = $(\".js-slide[data-slide='\" + 1 + \"']\");\r\n\t\t\t} else {\r\n\t\t\t\t$nextSlide = $(\".js-slide[data-slide='\" + (index + 1) + \"']\")\r\n\t\t\t}\r\n\t\t\t_.delay(function(){\r\n\t\t\t\t$nextSlide.addClass('active');\r\n\t\t\t}, 150);\r\n\t\t\t$allButtons.addClass('disabled');\r\n\t\t\t_.delay(function(){\r\n\t\t\t\t$nextSlide.addClass('even').removeClass('odd');\r\n\t\t\t\t$parent.addClass('odd').removeClass('even');\r\n\t\t\t\t$allButtons.removeClass('disabled');\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t},\r\n\r\n\tcustomSelect: function(){\r\n\t\t$('.js-callHours, .js-callMinutes').selectmenu({\r\n\t\t\ticons: { button: \"custom-triangle\" }\r\n\t\t});\r\n\t},\r\n\trender: function () {\r\n\r\n\t}\r\n});","window.ss.views.Carousel = Backbone.View.extend({\r\n\tel: '.js-carousel',\r\n\tevents: {\r\n\t\t'click .js-carouselLink': 'changeSlideClick'\r\n\t},\r\n\tinitialize: function () {\r\n\t\tthis.currentItem = 0;\r\n\t\tthis.$links = this.$('.js-carouselLink');\r\n\t\tthis.$slideHolder = this.$('.js-carouselSlides');\r\n\t\tthis.$items = this.$('.js-carouselItem');\r\n\t\tthis.timeout = 0;\r\n\t\tif (this.$el.attr('data-autorefresh')){\r\n\t\t\tthis.restartTimer();\r\n\t\t}\r\n\t},\r\n\tchangeSlideClick: function(e) {\r\n\t\te.preventDefault();\r\n\t\tthis.currentItem = $(e.currentTarget).parent().index();\r\n\t\tthis.changeSlide();\r\n\t},\r\n\tchangeSlide: function() {\r\n\t\t// Check boundaries\r\n\t\tthis.currentItem = (this.currentItem >= this.$links.length) ?\r\n\t\t    0 :\r\n\t\t    this.currentItem;\r\n\t\t// Set links colors\r\n\t\tthis.$links.filter('.active').removeClass('active');\r\n\t\tthis.$links.eq(this.currentItem).addClass('active');\r\n\t\t// Set slide\r\n\t\tthis.$slideHolder.transition({y: - this.currentItem * 350});\r\n\r\n\t\tthis.restartTimer();\r\n\t},\r\n\trestartTimer: function() {\r\n\t\tclearTimeout(this.timeout);\r\n\t\tthis.timeout = setTimeout(this.nextSlide.bind(this), 5000);\r\n\t},\r\n\tnextSlide: function() {\r\n\t\tthis.currentItem += 1;\r\n\t\tthis.changeSlide();\r\n\t}\r\n});","window.ss.views.Catalog = Backbone.View.extend({\r\n\tel: '.js-catalog',\r\n\tevents: {\r\n\t\t'click .js-sort': 'sort'\r\n\t},\r\n\tsort: function(){\r\n\r\n\t},\r\n\tinitialize: function(){\r\n\t\t$('#slider-range').slider({\r\n\t\t\trange: true,\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 200000,\r\n\t\t\tvalues: [ 0, 200000 ],\r\n\t\t\tslide: function( event, ui ) {\r\n\t\t\t\t$(\"#costFrom\").val(ui.values[0]);\r\n\t\t\t\t$(\"#costTo\").val(ui.values[1]);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});","window.ss.views.Gallery = Backbone.View.extend({\r\n\tel: '.js-gallery',\r\n\tevents: {\r\n\t\t'click .js-listItem': 'showImage'\r\n\t},\r\n\tinitialize: function(){\r\n\t\tvar self = this;\r\n\t\tsetInterval(function(){\r\n\t\t\tif (parseInt($(self.el).find('.js-listItem.active').index()) + 1 !== parseInt($(self.el).find('.js-listItem').length)){\r\n\t\t\t\tvar index = parseInt($(self.el).find('.js-listItem.active').index()) + 2;\r\n\t\t\t\t$('.js-listItem[data-slideId=\"'+ index +'\"]').trigger('click');\r\n\t\t\t} else {\r\n\t\t\t\t$('.js-listItem').eq(0).trigger('click');\r\n\t\t\t}\r\n\t\t}, 10000);\r\n\t},\r\n\tshowImage: function(e){\r\n\t\te.preventDefault();\r\n\t\tvar $self = $(e.currentTarget);\r\n\t\tvar slideId = parseInt($(e.currentTarget).attr('data-slideId'));\r\n\t\t$('.js-listItem.active').removeClass('active');\r\n\t\t$self.addClass('active');\r\n\t\t$('.js-fancybox').fadeOut();\r\n\t\t$(this.el).find('.js-fancybox[data-slideId=\"' + slideId + '\"]').fadeIn();\r\n\t}\r\n});","window.ss.views.Order = Backbone.View.extend({\r\n\tel: '.js-orderPopup',\r\n\tevents: {\r\n\t\t'click .js-sort': 'sort'\r\n\t},\r\n\tinitialize: function(){\r\n\t\tvar self = this;\r\n\t}\r\n});","$(function () {\r\n\twindow.ssApp = new window.ss.views.App();\r\n\r\n\t//youtube\r\n\tif ( $('.js-video-container')){\r\n\t\tvar player,\r\n\t\t\tdone = false,\r\n\t\t\t$container = $('.js-video-container'),\r\n\t\t\tvideoUrl = $('#player').attr('data-src');\r\n\t\twindow.onYouTubeIframeAPIReady = function() {\r\n\t\t\t\r\n\t\t\tplayer = new YT.Player('player', {\r\n\t\t\t\theight: '390',\r\n\t\t\t\twidth: '640',\r\n\t\t\t\tvideoId: videoUrl,\r\n\t\t\t\tevents: {\r\n\t\t\t\t\t'onReady': onPlayerReady,\r\n\t\t\t\t\t'onStateChange': onPlayerStateChange,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tfunction onPlayerReady(event) {\r\n\t\t\t//event.target.playVideo();\r\n\t\t};\r\n\r\n\t\tfunction onPlayerStateChange(event) {\r\n\t\t\tif (event.data == YT.PlayerState.PLAYING) {\r\n\t\t\t\t$container.addClass('activated');\r\n\t\t\t} else {\r\n\t\t\t\t$container.removeClass('activated');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfunction stopVideo() {\r\n\t\t\tplayer.stopVideo();\r\n\t\t}\r\n\t}\r\n});"],"sourceRoot":"/source/"}